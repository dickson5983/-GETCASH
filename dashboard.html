<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GetCash Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }
    body {
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: #fff;
      padding: 20px;
    }
    .container {
      max-width: 1100px;
      margin: auto;
      padding: 2rem;
      background-color: #1e293b;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      animation: fadeIn 0.8s ease;
    }
    header h1 {
      font-size: 2rem;
      color: #38bdf8;
      margin-bottom: 20px;
      animation: slideIn 0.5s ease;
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 20px;
      margin-bottom: 2rem;
    }
    nav a {
      text-decoration: none;
      color: #cbd5e1;
      font-weight: 600;
      transition: color 0.3s;
    }
    nav a:hover {
      color: #38bdf8;
    }
    section {
      margin-bottom: 2rem;
      padding: 1.5rem;
      border-radius: 12px;
      background-color: #334155;
      animation: fadeInUp 0.6s ease;
    }
    h2, h3 {
      color: #e2e8f0;
      margin-bottom: 10px;
    }
    input, button {
      padding: 0.8rem;
      margin: 0.5rem 0;
      width: 100%;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
    }
    input {
      background: #1e293b;
      color: #f8fafc;
    }
    button {
      background: #38bdf8;
      color: #0f172a;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #0ea5e9;
    }
    @keyframes fadeIn {
      from {opacity: 0;} to {opacity: 1;}
    }
    @keyframes fadeInUp {
      from {transform: translateY(20px); opacity: 0;} to {transform: translateY(0); opacity: 1;}
    }
    @keyframes slideIn {
      from {transform: translateX(-100px); opacity: 0;} to {transform: translateX(0); opacity: 1;}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Welcome to GetCash, <span id="user-name"></span></h1>
      <nav>
        <ul>
          <li><a href="#dashboard">Dashboard</a></li>
          <li><a href="#earnings">Earnings</a></li>
          <li><a href="#referral">Referral</a></li>
          <li><a href="#withdrawal">Withdrawal</a></li>
          <li><a href="#logout" onclick="logout()">Log Out</a></li>
        </ul>
      </nav>
    </header><section id="profile">
  <h2>User Profile</h2>
  <p><strong>Email:</strong> <span id="user-email"></span></p>
</section>

<section id="wallet-overview">
  <h2>Wallet Overview</h2>
  <p>Total Earnings: KES <span id="total-earnings"></span></p>
  <p>Withdrawable Balance: KES <span id="withdraw-balance"></span></p>
</section>

<section id="referral">
  <h2>Referral System</h2>
  <p>Share your referral link:</p>
  <input type="text" id="referral-link" readonly />
  <button onclick="copyReferralLink()">Copy</button>
  <p>Total Referrals: <span id="referral-count"></span></p>
  <p>Referral Earnings: KES <span id="referral-earnings"></span></p>
</section>

<section id="earnings">
  <h2>Earn More</h2>
  <button onclick="earn('blog')">Post Blog (KES 50)</button>
  <button onclick="earn('meme')">Upload Meme (KES 30)</button>
  <button onclick="earn('ad')">Click Ad (KES 20)</button>
  <button onclick="playGame()">Play Game</button>
</section>

<section id="withdrawal">
  <h2>Withdrawal</h2>
  <form onsubmit="requestWithdrawal(event)">
    <input type="number" placeholder="Amount (min 5000)" id="withdraw-amount" required />
    <button type="submit">Request Withdrawal</button>
  </form>
</section>

<section id="task-history">
  <h2>Task History</h2>
  <div id="task-list"></div>
</section>

<section id="admin-panel" style="display: none;">
  <h2>Admin Panel</h2>
  <h3>Users</h3>
  <div id="user-list"></div>

  <h3>Withdrawal Requests</h3>
  <div id="withdrawal-requests"></div>

  <h3>Send Payment</h3>
  <form onsubmit="sendPayment(event)">
    <input type="email" placeholder="User Email" id="pay-email" required />
    <input type="number" placeholder="Amount" id="pay-amount" required />
    <button type="submit">Send Payment</button>
  </form>
</section>

  </div>  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>  <script>
    const supabase = supabase.createClient('https://jfdotsvfxtqrwcmpramg.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmZG90c3ZmeHRxcndjbXByYW1nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgxMDQ1MzIsImV4cCI6MjA2MzY4MDUzMn0.TkiD437ReQ8xc7J8wCB68oOZdxqPU-ltvuFAzAF5ypY');

    async function getUser() {
      const { data: { user } } = await supabase.auth.getUser();
      if (user) {
        document.getElementById('user-name').textContent = user.user_metadata.full_name || 'User';
        document.getElementById('user-email').textContent = user.email;
        if (user.email === 'dicksonmutinda06@gmail.com') {
          document.getElementById('admin-panel').style.display = 'block';
        }
      } else {
        window.location.href = 'login.html';
      }
    }

    function logout() {
      supabase.auth.signOut().then(() => window.location.href = 'login.html');
    }

    function earn(type) {
      Swal.fire('Earned!', `You earned for ${type}!`, 'success');
    }

    function playGame() {
      Swal.fire('Launching Game...', 'Redirecting to game page.', 'info');
    }

    function copyReferralLink() {
      const link = document.getElementById('referral-link');
      navigator.clipboard.writeText(link.value);
      Swal.fire('Copied!', 'Referral link copied.', 'success');
    }

    function requestWithdrawal(e) {
      e.preventDefault();
      const amount = parseFloat(document.getElementById('withdraw-amount').value);
      if (amount < 5000) {
        Swal.fire('Error', 'Minimum is KES 5000.', 'error');
        return;
      }
      Swal.fire('Success', 'Withdrawal request sent.', 'success');
    }

    function sendPayment(e) {
      e.preventDefault();
      const email = document.getElementById('pay-email').value;
      const amount = parseFloat(document.getElementById('pay-amount').value);
      Swal.fire('Success', `KES ${amount} sent to ${email}`, 'success');
    }

    window.onload = getUser;
  </script></body>
</html>